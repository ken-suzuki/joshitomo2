<% if current_user.liking?(topic) %>
  <%= form_for(current_user.favorites.find_by(topic_id: topic.id), remote: true, html: { method: :delete }) do |f| %>
    <%= hidden_field_tag :topic_id, topic.id %>
    <%= button_tag( class: "btn btn-round btn-b") do %>
      <%= content_tag :span, "", class: "glyphicon glyphicon-heart" %>
    <% end %>
  <% end %>
<% else %>
  <%= form_for(current_user.favorites.build, remote: true) do |f| %>
    <%= hidden_field_tag :topic_id, topic.id %>
    <%= button_tag( class: "btn btn-round btn-b") do %>
      <%= content_tag :span, "", class: "glyphicon glyphicon-heart-empty" %>
    <% end %>
  <% end %>
<% end %>